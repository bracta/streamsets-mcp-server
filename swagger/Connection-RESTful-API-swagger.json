{"swagger":"2.0","info":{"description":"Provides API to manage Connections in Control Hub","version":"1.0.0","title":"Connection RESTful API"},"basePath":"/connection/rest","tags":[{"name":"connection"},{"name":"connections"}],"paths":{"/v1/connection/{connId}/acl":{"get":{"tags":["connection"],"summary":"Get ACL for a given Connection","description":"","operationId":"getAcl","produces":["application/json"],"parameters":[{"name":"connId","in":"path","required":true,"type":"string"}],"security":[{"basic":[]}],"responses":{"200":{"description":"successful operation","schema":{"$ref":"#/definitions/AclJson"}}}},"post":{"tags":["connection"],"summary":"Update ACL for a given Connection","description":"","operationId":"updateConnectionAcl","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"connId","in":"path","required":true,"type":"string"},{"in":"body","name":"body","required":false,"schema":{"$ref":"#/definitions/AclJson"}}],"security":[{"basic":[]}],"responses":{"200":{"description":"successful operation","schema":{"$ref":"#/definitions/AclJson"}}}}},"/v1/connection/{connId}/permissions/{subjectId}":{"get":{"tags":["connection"],"summary":"Get permissions on a given Connection for a given subject","description":"","operationId":"getConnectionPermissionsForSubject","produces":["application/json"],"parameters":[{"name":"connId","in":"path","required":true,"type":"string"},{"name":"subjectId","in":"path","required":true,"type":"string"}],"security":[{"basic":[]}],"responses":{"200":{"description":"successful operation","schema":{"$ref":"#/definitions/AclJson"}}}},"post":{"tags":["connection"],"summary":"Update permissions on a given Data Connection for a given subject","description":"","operationId":"updateConnectionPermissionsForSubject","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"connId","in":"path","required":true,"type":"string"},{"name":"subjectId","in":"path","required":true,"type":"string"},{"in":"body","name":"body","required":false,"schema":{"$ref":"#/definitions/PermissionJson"}}],"security":[{"basic":[]}],"responses":{"200":{"description":"successful operation","schema":{"$ref":"#/definitions/AclJson"}}}}},"/v1/connection/{connectionId}":{"get":{"tags":["connection"],"summary":"Get Connection for given Connection Id","description":"","operationId":"get","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"connectionId","in":"path","required":true,"type":"string"}],"security":[{"basic":[]}],"responses":{"200":{"description":"successful operation","schema":{"$ref":"#/definitions/ConnectionJson"}}}},"delete":{"tags":["connection"],"summary":"Delete Connection for given Connection Id","description":"","operationId":"delete","produces":["application/json"],"parameters":[{"name":"connectionId","in":"path","required":true,"type":"string"}],"security":[{"basic":[]}],"responses":{"default":{"description":"successful operation"}}}},"/v1/connection/{connId}":{"post":{"tags":["connection"],"summary":"Update Connection for given Connection Id","description":"","operationId":"update","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"connectionId","in":"path","required":true,"type":"string"},{"in":"body","name":"body","required":false,"schema":{"$ref":"#/definitions/ConnectionJson"}}],"security":[{"basic":[]}],"responses":{"200":{"description":"successful operation","schema":{"$ref":"#/definitions/ConnectionJson"}}}}},"/v1/connection/{connId}/getPipelineCommits":{"get":{"tags":["connection"],"summary":"Get all the pipeline commits using a given Connection","description":"","operationId":"getPipelineCommitsUsedByConnection","produces":["application/json"],"parameters":[{"name":"connId","in":"path","required":true,"type":"string"},{"name":"latest","in":"query","required":false,"type":"boolean","default":false},{"name":"len","in":"query","required":false,"type":"integer","default":-1,"format":"int32"},{"name":"offset","in":"query","required":false,"type":"integer","default":0,"format":"int32"},{"name":"withWrapper","in":"query","required":false,"type":"boolean","default":false}],"security":[{"basic":[]}],"responses":{"200":{"description":"successful operation","schema":{"type":"array","items":{"$ref":"#/definitions/PipelineConnectionJson"}}}}}},"/v1/connection/{connId}/countPipelineCommits":{"get":{"tags":["connection"],"summary":"Count all the pipeline commits using a given Connection","description":"","operationId":"countPipelineCommitsUsedByConnection","produces":["application/json"],"parameters":[{"name":"connId","in":"path","required":true,"type":"string"}],"security":[{"basic":[]}],"responses":{"default":{"description":"successful operation"}}}},"/v1/connection/listAclAudits":{"get":{"tags":["connection"],"summary":"Get all user actions for given Organization ID","description":"","operationId":"listAclAuditsForOrg","produces":["application/json"],"parameters":[{"name":"organization","in":"query","required":false,"type":"string"},{"name":"offset","in":"query","required":false,"type":"integer","default":0,"format":"int32"},{"name":"len","in":"query","required":false,"type":"integer","default":-1,"format":"int32"},{"name":"sortField","in":"query","required":false,"type":"string","default":"TIME","enum":["TIME","ACTION","REQUESTER_ID","ACL_ID"]},{"name":"sortOrder","in":"query","required":false,"type":"string","default":"DESC","enum":["ASC","DESC"]},{"name":"withWrapper","in":"query","required":false,"type":"boolean","default":false}],"security":[{"basic":[]}],"responses":{"200":{"description":"successful operation","schema":{"type":"array","items":{"$ref":"#/definitions/AclAuditJson"}}}}}},"/v1/connections/name":{"get":{"tags":["connections"],"summary":"Returns the name of a connection given its id","description":"","operationId":"getConnectionName","produces":["text/plain"],"parameters":[{"name":"connectionId","in":"query","required":false,"type":"string"}],"security":[{"basic":[]}],"responses":{"200":{"description":"successful operation","schema":{"$ref":"#/definitions/PaginationWrapperJson"}}}}},"/v1/connections/names":{"post":{"tags":["connections"],"summary":"Returns the name of a connection for each of the given ids","description":"","operationId":"getConnectionNames","consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"body","name":"body","required":false,"schema":{"type":"array","items":{"type":"string"}}}],"security":[{"basic":[]}],"responses":{"200":{"description":"successful operation","schema":{"$ref":"#/definitions/PaginationWrapperJson"}}}}},"/v1/connections/types":{"get":{"tags":["connections"],"summary":"Returns a list of Connection types being used by the Org and that the user has access to","description":"","operationId":"getConnectionNames_1","produces":["application/json"],"parameters":[{"name":"len","in":"query","required":false,"type":"integer","default":-1,"format":"int32"},{"name":"offset","in":"query","required":false,"type":"integer","default":0,"format":"int32"},{"name":"withWrapper","in":"query","required":false,"type":"boolean","default":false}],"security":[{"basic":[]}],"responses":{"200":{"description":"successful operation","schema":{"type":"array","items":{"$ref":"#/definitions/ConnectionTypesJson"}}}}}},"/v1/connections/{connectionId}/audit":{"get":{"tags":["connections"],"summary":"Returns audit log for given Connection Id","description":"","operationId":"getConnectionAudits","produces":["application/json"],"parameters":[{"name":"connectionId","in":"path","required":true,"type":"string"}],"security":[{"basic":[]}],"responses":{"200":{"description":"successful operation","schema":{"type":"array","items":{"type":"string"}}}}}},"/v1/connections/{orgId}/connectionAudits":{"get":{"tags":["connections"],"summary":"Get all connection audits in the last 30 days for given Organization ID","description":"","operationId":"listUserActionsForOrg","produces":["application/json"],"parameters":[{"name":"orgId","in":"path","required":true,"type":"string"},{"name":"offset","in":"query","required":false,"type":"integer","default":0,"format":"int32"},{"name":"len","in":"query","required":false,"type":"integer","default":-1,"format":"int32"},{"name":"sortField","in":"query","required":false,"type":"string","default":"auditTime"},{"name":"sortOrder","in":"query","required":false,"type":"string","default":"DESC"},{"name":"withWrapper","in":"query","required":false,"type":"boolean"}],"security":[{"basic":[]}],"responses":{"200":{"description":"successful operation","schema":{"type":"array","items":{"$ref":"#/definitions/ConnectionAuditJson"}}}}}},"/v1/connections":{"get":{"tags":["connections"],"summary":"Returns Connections a user has access to","description":"","operationId":"getConnections","produces":["application/json"],"parameters":[{"name":"organization","in":"query","required":false,"type":"string"},{"name":"connectionType","in":"query","required":false,"type":"string"},{"name":"filterText","in":"query","required":false,"type":"string"},{"name":"offset","in":"query","required":false,"type":"integer","default":0,"format":"int32"},{"name":"len","in":"query","required":false,"type":"integer","default":-1,"format":"int32"},{"name":"orderBy","in":"query","required":false,"type":"string","default":"NAME","enum":["NAME","TYPE","CREATOR","CREATE_TIME","LAST_MODIFIED_BY","LAST_MODIFIED_TIME"]},{"name":"order","in":"query","required":false,"type":"string","default":"ASC","enum":["ASC","DESC"]},{"name":"withTotalCount","in":"query","required":false,"type":"boolean","default":false},{"name":"tag","in":"query","required":false,"type":"string"}],"security":[{"basic":[]}],"responses":{"200":{"description":"successful operation","schema":{"$ref":"#/definitions/PaginationWrapperJson"}}}},"put":{"tags":["connections"],"summary":"Create new Connection","description":"","operationId":"createConnection","consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"body","name":"body","required":false,"schema":{"$ref":"#/definitions/ConnectionJson"}}],"security":[{"basic":[]}],"responses":{"200":{"description":"successful operation","schema":{"$ref":"#/definitions/ConnectionJson"}}}}},"/v1/connections/{connectionId}/tags":{"get":{"tags":["connections"],"summary":"Return tags for given Connection Id","description":"","operationId":"getConnectionTags","produces":["application/json"],"parameters":[{"name":"connectionId","in":"path","required":true,"type":"string"}],"security":[{"basic":[]}],"responses":{"200":{"description":"successful operation","schema":{"type":"array","items":{"type":"string"}}}}}},"/v1/connections/{orgId}/connectionAuditsTime":{"get":{"tags":["connections"],"summary":"Get all connection audits between start time and end time","description":"","operationId":"getConnectionAuditsForOrgFilteredByTime","produces":["application/json"],"parameters":[{"name":"orgId","in":"path","required":true,"type":"string"},{"name":"offset","in":"query","required":false,"type":"integer","default":0,"format":"int32"},{"name":"len","in":"query","required":false,"type":"integer","default":100,"format":"int32"},{"name":"sortField","in":"query","required":false,"type":"string","default":"auditTime"},{"name":"sortOrder","in":"query","required":false,"type":"string","default":"DESC"},{"name":"startTime","in":"query","required":false,"type":"integer","format":"int64"},{"name":"endTime","in":"query","required":false,"type":"integer","format":"int64"}],"security":[{"basic":[]}],"responses":{"200":{"description":"successful operation","schema":{"type":"array","items":{"$ref":"#/definitions/ConnectionAuditJson"}}}}}},"/v1/connections/namesTypes":{"get":{"tags":["connections"],"summary":"Returns the name and type of the connections for each of the given connection types","description":"","operationId":"getConnectionNamesAndTypes","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"organization","in":"query","required":false,"type":"string"},{"name":"connectionTypes","in":"query","required":false,"type":"array","items":{"type":"string"},"collectionFormat":"multi"}],"security":[{"basic":[]}],"responses":{"200":{"description":"successful operation","schema":{"type":"array","items":{"type":"object"}}}}}},"/v1/connections/tags":{"get":{"tags":["connections"],"summary":"Returns all available Connection Tags","description":"","operationId":"listAllConnectionTags","produces":["application/json"],"parameters":[{"name":"organization","in":"query","required":false,"type":"string"},{"name":"parentId","in":"query","required":false,"type":"string"},{"name":"offset","in":"query","required":false,"type":"integer","default":0,"format":"int32"},{"name":"len","in":"query","required":false,"type":"integer","default":-1,"format":"int32"},{"name":"order","in":"query","required":false,"type":"string","default":"ASC","enum":["ASC","DESC"]}],"security":[{"basic":[]}],"responses":{"200":{"description":"successful operation","schema":{"type":"array","items":{"$ref":"#/definitions/ConnectionTag"}}}}}},"/v1/connections/listAclAudits":{"get":{"tags":["connections"],"summary":"Get all user actions for given Organization ID","description":"","operationId":"listAclAuditsForOrg_1","produces":["application/json"],"parameters":[{"name":"organization","in":"query","required":false,"type":"string"},{"name":"offset","in":"query","required":false,"type":"integer","default":0,"format":"int32"},{"name":"len","in":"query","required":false,"type":"integer","default":-1,"format":"int32"},{"name":"sortField","in":"query","required":false,"type":"string","default":"TIME","enum":["TIME","ACTION","REQUESTER_ID","ACL_ID"]},{"name":"sortOrder","in":"query","required":false,"type":"string","default":"DESC","enum":["ASC","DESC"]},{"name":"withWrapper","in":"query","required":false,"type":"boolean","default":false}],"security":[{"basic":[]}],"responses":{"200":{"description":"successful operation","schema":{"type":"array","items":{"$ref":"#/definitions/AclAuditJson"}}}}}}},"definitions":{"AclJson":{"type":"object","properties":{"resourceId":{"type":"string"},"organization":{"type":"string"},"resourceOwner":{"type":"string"},"resourceCreatedTime":{"type":"integer","format":"int64"},"resourceType":{"type":"string","enum":["JOB","LOCAL_PIPELINE","PIPELINE","SDC","TOPOLOGY","SLA","ALERT","DEPLOYMENT","DPM_AGENT","SCHEDULER_JOB","EVENT_SUBSCRIPTION","REPORT_DEFINITION","CONNECTION","CSP_ENVIRONMENT","CSP_DEPLOYMENT","STAGE_DESTINATION","MIGRATION","JOB_SEQUENCE"]},"lastModifiedBy":{"type":"string"},"lastModifiedOn":{"type":"integer","format":"int64"},"permissions":{"type":"array","items":{"$ref":"#/definitions/PermissionJson"}}}},"PermissionJson":{"type":"object","properties":{"resourceId":{"type":"string"},"subjectId":{"type":"string"},"subjectType":{"type":"string","enum":["USER","GROUP"]},"lastModifiedBy":{"type":"string"},"lastModifiedOn":{"type":"integer","format":"int64"},"actions":{"type":"array","items":{"type":"string","enum":["READ","WRITE","EXECUTE"]}}}},"ConnectionJson":{"type":"object","properties":{"id":{"type":"string"},"organization":{"type":"string"},"name":{"type":"string"},"description":{"type":"string"},"createdBy":{"type":"string"},"createdTime":{"type":"integer","format":"int64"},"lastModifiedBy":{"type":"string"},"lastModifiedTime":{"type":"integer","format":"int64"},"connectionDefinition":{"type":"string"},"connectionType":{"type":"string"},"libraryDefinition":{"type":"string"},"sdcVersion":{"type":"string"},"sdcId":{"type":"string"},"tags":{"type":"array","items":{"$ref":"#/definitions/ConnectionTagJson"}},"rawConnectionTags":{"type":"array","items":{"type":"string"}},"typeLabel":{"type":"string"},"verifierStagelib":{"type":"string"},"readOnly":{"type":"boolean"},"projectId":{"type":"string"}}},"ConnectionTagJson":{"type":"object","properties":{"id":{"type":"string"},"tag":{"type":"string"},"organization":{"type":"string"},"parentId":{"type":"string"}}},"PipelineConnectionJson":{"type":"object","properties":{"pipelineId":{"type":"string"},"pipelineCommitId":{"type":"string"},"connectionId":{"type":"string"},"pipelineName":{"type":"string"},"pipelineVersion":{"type":"string"},"lastModifiedOn":{"type":"integer","format":"int64"},"fragment":{"type":"boolean"}}},"AclAuditJson":{"type":"object","properties":{"subjectId":{"type":"string"},"resourceId":{"type":"string"},"resourceType":{"type":"string"},"action":{"type":"string"},"fieldType":{"type":"string"},"oldValue":{"type":"string"},"newValue":{"type":"string"},"requesterId":{"type":"string"},"orgId":{"type":"string"},"time":{"type":"integer","format":"int64"},"ipAddress":{"type":"string"}}},"PaginationWrapperJson":{"type":"object","properties":{"totalCount":{"type":"integer","format":"int64"},"offset":{"type":"integer","format":"int64"},"len":{"type":"integer","format":"int64"},"data":{"type":"object"}}},"ConnectionTypesJson":{"type":"object","properties":{"type":{"type":"string"},"label":{"type":"string"}}},"ConnectionAuditJson":{"type":"object","properties":{"id":{"type":"string"},"organization":{"type":"string"},"userId":{"type":"string"},"connectionId":{"type":"string"},"connectionName":{"type":"string"},"auditTime":{"type":"integer","format":"int64"},"auditAction":{"type":"string","enum":["CREATE","DELETE","UPDATE"]}}},"ConnectionTag":{"type":"object","properties":{"optimisticLockVersion":{"type":"integer","format":"int64"},"id":{"type":"string"},"tag":{"type":"string"},"organization":{"type":"string"},"parentId":{"type":"string"}}}}}